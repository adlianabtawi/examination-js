<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>M√∂belbutik - M√∂bler och Inredning</title>
        <style>
            /* ========== RESET / BAS ========== */
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  line-height: 1.6;
  color: #333;
}

.container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

/* ========== HEADER ========== */
header {
  background: white;
  border-bottom: 1px solid #e5e5e5;
  position: sticky;
  top: 0;
  z-index: 100;
}

.header-content {
  display: flex;
  align-items: center;
  height: 64px;
  position: relative;
}

.logo {
  font-size: 20px;
  font-weight: 600;
  letter-spacing: -0.5px;
  cursor: pointer;
  background: none;
  border: none;
  color: #333;

  position: absolute;
  left: 50%;
  transform: translateX(-50%);
}

.nav-menu {
  display: flex;
  align-items: center;
  gap: 32px;
  margin-right: auto;
}

.nav-menu button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px 0;
  font-size: 15px;
  color: #333;
}

.nav-menu button.active { border-bottom: 2px solid black; }

.cart-icon {
  position: relative;
  cursor: pointer;
  background: none;
  border: none;
}

#cart-desktop {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-left: auto;
}

.cart-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  background: black;
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
}

.menu-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
}
.menu-button.mobile { display: none; }

#cart-mobile { display: none; }

/* ========== HERO ========== */
.hero {
  background: #1a1a1a;
  color: white;
  padding: 64px 48px;
  margin: 32px 0;
}
.hero h1 { font-size: 48px; margin-bottom: 16px; }
.hero p { color: #d1d1d1; font-size: 18px; }

/* ========== GRID / PRODUKTER ========== */
.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 32px;
  margin-bottom: 64px;
}

.product-card {
  cursor: pointer;
  background: none;
  border: none;
  text-align: left;
  width: 100%;
  position: relative;
}

.product-image {
  width: 100%;
  aspect-ratio: 1;
  background: #f5f5f5;
  margin-bottom: 12px;
  overflow: hidden;
  position: relative;
}

.product-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s;
}
.product-card:hover .product-image img { transform: scale(1.05); }

.product-name { font-size: 16px; margin-bottom: 4px; font-weight: 500; }
.product-price { color: #666; font-size: 15px; }

/* overlay buttons */
.product-action-left,
.product-action-right {
  position: absolute;
  bottom: 12px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 5;
}
.product-action-left { left: 12px; }
.product-action-right { right: 12px; }

.action-btn {
  background: rgba(0, 0, 0, 0.85);
  color: white;
  border: none;
  padding: 8px 10px;
  font-size: 13px;
  cursor: pointer;
  border-radius: 6px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.action-btn.add-btn { background: #16a34a; }
.action-btn.remove-btn { background: #dc2626; }

.action-btn .action-icon {
  width: 18px;
  height: 18px;
}

.action-btn .sign {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: white;
  color: black;
  font-weight: 700;
  font-size: 12px;
  margin-left: 6px;
}

/* ========== MODAL ========== */
.modal.hidden { display: none; }

.modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.5);
  padding: 20px;
  z-index: 300;
}

.modal-content {
  background: white;
  width: 100%;
  max-width: 900px;
  max-height: 80vh;
  overflow: auto;
  border-radius: 8px;
  padding: 20px;
  position: relative;
}

.modal-close {
  position: absolute;
  top: 12px;
  right: 12px;
  background: rgba(0,0,0,0.8);
  color: #fff;
  font-size: 18px;
  line-height: 1;
  padding: 8px 10px;
  border-radius: 999px;
  cursor: pointer;
  border: none;
  z-index: 12;
}

/* product modal content */
.product-detail {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 48px;
}

.product-detail-image { background: #f5f5f5; aspect-ratio: 1; }
.product-detail-image img { width: 100%; height: 100%; object-fit: cover; }

.product-info { padding: 48px 0; }
.product-info h1 { font-size: 36px; margin-bottom: 16px; }
.product-info .price { font-size: 24px; color: #666; margin-bottom: 24px; }

.product-description { color: #666; line-height: 1.8; margin-bottom: 32px; }

.features { border-top: 1px solid #e5e5e5; padding-top: 24px; margin-bottom: 32px; }
.features h3 { font-size: 18px; margin-bottom: 16px; }
.features ul { list-style: none; color: #666; }
.features li { margin-bottom: 8px; }

.add-to-cart-button {
  background: black;
  color: white;
  border: none;
  padding: 14px 32px;
  font-size: 15px;
  cursor: pointer;
}
.add-to-cart-button:hover { background: #333; }

/* cart modal content */
.empty-cart { text-align: center; padding: 64px 0; }
.empty-cart p { color: #666; margin-bottom: 32px; }

.cart-layout { display: grid; grid-template-columns: 2fr 1fr; gap: 32px; }
.cart-items { display: flex; flex-direction: column; gap: 16px; }

.cart-item { display: flex; gap: 16px; border: 1px solid #e5e5e5; padding: 16px; }

.cart-item-image { width: 120px; height: 120px; background: #f5f5f5; flex-shrink: 0; }
.cart-item-image img { width: 100%; height: 100%; object-fit: cover; }

.cart-item-info { flex: 1; }
.cart-item-name { font-size: 16px; font-weight: 500; margin-bottom: 8px; }
.cart-item-price { color: #666; margin-bottom: 16px; }

.quantity-controls { display: flex; align-items: center; gap: 12px; }
.quantity-button {
  width: 32px; height: 32px;
  border: 1px solid #d1d1d1;
  background: white;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
}
.quantity-display { width: 32px; text-align: center; }

.cart-item-actions {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: flex-end;
}

.remove-button { background: none; border: none; color: #999; cursor: pointer; padding: 4px; }
.remove-button:hover { color: #dc2626; }

.cart-item-total { font-weight: 500; }

.order-summary {
  border: 1px solid #e5e5e5;
  padding: 24px;
  height: fit-content;
  position: sticky;
  top: 80px;
}

.order-summary h2 { font-size: 24px; margin-bottom: 24px; }
.summary-line { display: flex; justify-content: space-between; margin-bottom: 12px; }
.summary-line.total { border-top: 1px solid #e5e5e5; padding-top: 12px; font-weight: 600; }

.checkout-button {
  width: 100%;
  background: black;
  color: white;
  border: none;
  padding: 14px;
  font-size: 15px;
  cursor: pointer;
  margin-top: 24px;
  margin-bottom: 12px;
}
.checkout-button:hover { background: #333; }

.continue-shopping-button {
  width: 100%;
  background: white;
  border: 1px solid #d1d1d1;
  padding: 14px;
  font-size: 15px;
  cursor: pointer;
}
.continue-shopping-button:hover { background: #f5f5f5; }

.icon-img { width: 20px; height: 20px; display: inline-block; vertical-align: middle; }

/* ========== RESPONSIVE ========== */
@media (min-width: 769px) {
  .action-btn { padding: 10px 14px; font-size: 15px; }
  #cart-desktop .icon-img { width: 28px; height: 28px; }
}

@media (max-width: 768px) {
  .nav-menu {
    display: none;
    flex-direction: column;
    gap: 0;
    position: absolute;
    top: 64px;
    left: 0;
    right: 0;
    background: white;
    border-top: 1px solid #e5e5e5;
    padding: 16px;
    width: 100%;
  }
  .nav-menu.open { display: flex; }

  .nav-menu button {
    padding: 12px 16px;
    text-align: left;
  }

  #cart-desktop { display: none; }
  #cart-mobile { display: inline-flex; }
  .menu-button.mobile { display: block; }

  .header-content { justify-content: space-between; }

  .hero { padding: 48px 24px; }
  .hero h1 { font-size: 32px; }

  .product-grid { grid-template-columns: repeat(2, 1fr); gap: 16px; }
  .product-detail { grid-template-columns: 1fr; gap: 24px; }
  .product-info { padding: 0; }
  .cart-layout { grid-template-columns: 1fr; }
  .cart-item-image { width: 80px; height: 80px; }
}
        </style>
    </head>
    <body>
  <!-- HEADER -->
  <header>
    <div class="container">
      <div class="header-content">
        <!-- Mobile menu button -->
        <button class="menu-button mobile" id="menu-toggle" aria-label="√ñppna meny" type="button">
          <img id="menu-icon" class="icon-img" src="icons/menu.svg" alt="Meny" />
        </button>

        <!-- Nav -->
        <nav class="nav-menu" aria-label="Huvudmeny">
          <button id="nav-products" class="active" type="button">Produkter</button>
          <button id="nav-about" type="button">Om Oss</button>
          <button id="nav-contact" type="button">Kontakt</button>
          <button id="nav-faq" type="button">FAQ</button>
        </nav>

        <!-- Logo -->
        <button class="logo" type="button" aria-label="G√• till start">M√ñBLER</button>

        <!-- Desktop cart -->
        <button class="cart-icon" id="cart-desktop" type="button" aria-label="√ñppna varukorg">
          <img src="icons/cart.svg" alt="" class="icon-img" />
          <span class="cart-badge" id="cart-badge">0</span>
        </button>

        <!-- Mobile cart -->
        <button class="cart-icon" id="cart-mobile" type="button" aria-label="√ñppna varukorg">
          <img src="icons/cart.svg" alt="" class="icon-img" />
          <span class="cart-badge" id="cart-badge-mobile">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- PRODUCT MODAL -->
  <div id="product-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-content">
      <button id="product-modal-close" class="modal-close" aria-label="St√§ng" title="St√§ng" type="button">√ó</button>
      <div id="product-modal-body"></div>
    </div>
  </div>

  <!-- CART MODAL -->
  <div id="cart-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-content">
      <button id="cart-modal-close" class="modal-close" aria-label="St√§ng" title="St√§ng" type="button">√ó</button>
      <div id="cart-modal-body"></div>
    </div>
  </div>

  <!-- HOME -->
  <main>
    <div class="container">
      <div class="hero">
        <h1>Ny Kollektion</h1>
        <p>Uppt√§ck v√•r senaste m√∂bler och hemdekorationsdelar</p>
      </div>

      <div class="product-grid" id="product-grid"></div>
    </div>
  </main>

  

        <script>
            /* =========================================================
   DATA
   ========================================================= */
const products = [
  {
    id: 1,
    name: "Modern Stol",
    price: 3135,
    image: "https://images.unsplash.com/photo-1760716478137-d861d5b354e8?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=800",
    description: "En elegant modern stol med premiumtyg. Perfekt f√∂r varje samtida boendemilj√∂. Ergonomisk design f√∂r maximal komfort.",
    features: ["Premiumkvalitetsmaterial","Noggrant hantverk","H√•llbar konstruktion","L√§tt att underh√•lla"],
  },
  {
    id: 2,
    name: "Designer Lampa",
    price: 1564,
    image: "https://images.unsplash.com/photo-1702505973200-cce1a216f92b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=800",
    description: "En samtida designerlampa med justerbar ljusstyrka. Tillf√∂r en touch av sofistikation till ditt arbetsrum eller sovrum. Energieffektiv LED-teknik.",
    features: ["Premiumkvalitetsmaterial","Noggrant hantverk","H√•llbar konstruktion","L√§tt att underh√•lla"],
  },
  {
    id: 3,
    name: "Keramisk Vas",
    price: 830,
    image: "https://images.unsplash.com/photo-1612196808214-b8e1d6145a8c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=800",
    description: "En handgjord keramisk vas med minimalistisk design. Perfekt f√∂r att visa fram f√§rska blommor eller som en frist√•ende dekorativ prydnad. Gjord av lokala hantverkare.",
    features: ["Premiumkvalitetsmaterial","Noggrant hantverk","H√•llbar konstruktion","L√§tt att underh√•lla"],
  },
  {
    id: 4,
    name: "Soffbord",
    price: 5235,
    image: "https://images.unsplash.com/photo-1617638924751-cc232f82ecf9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=800",
    description: "Ett solidt soffbord av tr√§ med modernt utf√∂rande. Robust konstruktion med rena linjer. Perfekt mittpiece f√∂r ditt vardagsrum.",
    features: ["Premiumkvalitetsmaterial","Noggrant hantverk","H√•llbar konstruktion","L√§tt att underh√•lla"],
  },
  {
    id: 5,
    name: "V√§ggklocka",
    price: 935,
    image: "https://images.unsplash.com/photo-1566663409293-585e129d2e71?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=800",
    description: "En minimalistisk v√§ggklocka med tyst mekanik. Har en ren design som passar till vilken inredning som helst. Batteridrivad f√∂r enkel installation.",
    features: ["Premiumkvalitetsmaterial","Noggrant hantverk","H√•llbar konstruktion","L√§tt att underh√•lla"],
  },
  {
    id: 6,
    name: "Dekorativ Upps√§ttning",
    price: 2090,
    image: "https://images.unsplash.com/photo-1711564354293-30760984899e?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=800",
    description: "En kurerad dekorativ upps√§ttning med flera delar. Varje f√∂rem√•l noggrant utvalt f√∂r att skapa en sammanh√§ngande estetik. Perfekt f√∂r att utsmycka hyllor och ytor.",
    features: ["Premiumkvalitetsmaterial","Noggrant hantverk","H√•llbar konstruktion","L√§tt att underh√•lla"],
  },
];

/* =========================================================
   APP (IIFE)
   - St√§dat: ingen page-routing, bara modaler + grid
   ========================================================= */
(function () {
  const app = {
    /* ---------- STATE ---------- */
    cart: [],               // [{id,name,price,image,quantity}]
    selectedProduct: null,  // produkten som visas i produkt-modal
    menuOpen: false,

    /* ---------- INIT ---------- */
    init: function () {
      this.renderProducts();
      this.updateCartBadge();
      this.wireEvents();
    },

    /* ---------- DOM HELPERS ---------- */
    qs: function (sel) { return document.querySelector(sel); },
    byId: function (id) { return document.getElementById(id); },

    /* =========================================================
       EVENTS
       - St√§dat: overlay-click & close s√§tts en g√•ng (inte varje √∂ppning)
       ========================================================= */
    wireEvents: function () {
      const self = this;

      // Logo och "Produkter" -> scroll top
      this.qs(".logo")?.addEventListener("click", function () {
        window.scrollTo(0, 0);
        self.closeMenuIfOpen();
      });

      this.byId("nav-products")?.addEventListener("click", function () {
        window.scrollTo(0, 0);
        self.closeMenuIfOpen();
      });

      // Cart buttons
      this.byId("cart-desktop")?.addEventListener("click", function () {
        self.openCartModal();
      });

      this.byId("cart-mobile")?.addEventListener("click", function () {
        self.openCartModal();
        self.closeMenuIfOpen();
      });

      // Menu toggle
      this.byId("menu-toggle")?.addEventListener("click", function () {
        self.toggleMenu();
      });

      // Close buttons
      this.byId("product-modal-close")?.addEventListener("click", function () {
        self.closeProductModal();
      });

      this.byId("cart-modal-close")?.addEventListener("click", function () {
        self.closeCartModal();
      });

      // Overlay click -> close
      const pm = this.byId("product-modal");
      pm?.addEventListener("click", function (e) {
        if (e.target === pm) self.closeProductModal();
      });

      const cm = this.byId("cart-modal");
      cm?.addEventListener("click", function (e) {
        if (e.target === cm) self.closeCartModal();
      });

      // ESC -> close everything
      document.addEventListener("keydown", function (e) {
        if (e.key !== "Escape") return;
        self.closeProductModal();
        self.closeCartModal();
        self.closeMenuIfOpen();
      });
    },

    /* =========================================================
       MENU
       ========================================================= */
    toggleMenu: function () {
      this.menuOpen = !this.menuOpen;

      const menu = this.qs(".nav-menu");
      const icon = this.byId("menu-icon");
      if (!menu || !icon) return;

      if (this.menuOpen) {
        menu.classList.add("open");
        icon.src = "icons/close.svg";
      } else {
        menu.classList.remove("open");
        icon.src = "icons/menu.svg";
      }
    },

    closeMenuIfOpen: function () {
      if (this.menuOpen) this.toggleMenu();
    },

    /* =========================================================
       PRODUCTS GRID
       - St√§dat: korrekt click-skydd (action-btn)
       ========================================================= */
    renderProducts: function () {
      const grid = this.byId("product-grid");
      if (!grid) return;

      grid.innerHTML = "";

      for (let i = 0; i < products.length; i++) {
        const p = products[i];
        const self = this;

        const card = document.createElement("div");
        card.className = "product-card";
        card.setAttribute("role", "button");
        card.tabIndex = 0;

        // √ñppna produkt n√§r man klickar p√• kortet (inte p√• +/‚àí)
        card.addEventListener("click", function (e) {
          if (e.target.closest(".action-btn")) return; // ‚úÖ fix
          self.openProduct(p.id);
        });

        card.addEventListener("keydown", function (e) {
          if (e.key === "Enter") self.openProduct(p.id);
        });

        const imgWrap = document.createElement("div");
        imgWrap.className = "product-image";

        const img = document.createElement("img");
        img.src = p.image;
        img.alt = p.name;
        imgWrap.appendChild(img);

        // Overlay containers
        const left = document.createElement("div");
        left.className = "product-action-left";

        const right = document.createElement("div");
        right.className = "product-action-right";

        // minus-knapp visas om produkten finns i cart
        if (this.getCartItem(p.id)) {
          const removeBtn = document.createElement("button");
          removeBtn.className = "action-btn remove-btn";
          removeBtn.innerHTML =
            '<svg class="action-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="9" cy="20" r="1"></circle><circle cx="19" cy="20" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg><span class="sign">‚àí</span>';
          removeBtn.addEventListener("click", function (e) {
            e.stopPropagation();
            self.decreaseQty(p.id);
          });
          left.appendChild(removeBtn);
        }

        // plus-knapp visas alltid
        const addBtn = document.createElement("button");
        addBtn.className = "action-btn add-btn";
        addBtn.innerHTML =
          '<svg class="action-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="9" cy="20" r="1"></circle><circle cx="19" cy="20" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg><span class="sign">+</span>';
        addBtn.addEventListener("click", function (e) {
          e.stopPropagation();
          self.addToCart(p.id);
        });
        right.appendChild(addBtn);

        imgWrap.appendChild(left);
        imgWrap.appendChild(right);

        const nameDiv = document.createElement("div");
        nameDiv.className = "product-name";
        nameDiv.textContent = p.name;

        const priceDiv = document.createElement("div");
        priceDiv.className = "product-price";
        priceDiv.textContent = p.price + " kr";

        card.appendChild(imgWrap);
        card.appendChild(nameDiv);
        card.appendChild(priceDiv);

        grid.appendChild(card);
      }
    },

    /* =========================================================
       PRODUCT MODAL
       ========================================================= */
    openProduct: function (productId) {
      this.selectedProduct = this.findProduct(productId);
      if (!this.selectedProduct) return;

      this.renderProductModalBody();
      this.openModal("product-modal");
    },

    renderProductModalBody: function () {
      const body = this.byId("product-modal-body");
      const p = this.selectedProduct;
      if (!body || !p) return;

      body.innerHTML = "";

      const detail = document.createElement("div");
      detail.className = "product-detail";

      const imgWrap = document.createElement("div");
      imgWrap.className = "product-detail-image";
      const img = document.createElement("img");
      img.src = p.image;
      img.alt = p.name;
      imgWrap.appendChild(img);

      const info = document.createElement("div");
      info.className = "product-info";

      const h1 = document.createElement("h1");
      h1.textContent = p.name;

      const price = document.createElement("div");
      price.className = "price";
      price.textContent = p.price + " kr";

      const desc = document.createElement("div");
      desc.className = "product-description";
      const txt = document.createElement("p");
      txt.textContent = p.description;
      desc.appendChild(txt);

      const features = document.createElement("div");
      features.className = "features";
      const h3 = document.createElement("h3");
      h3.textContent = "Features";

      const ul = document.createElement("ul");
      for (let i = 0; i < p.features.length; i++) {
        const li = document.createElement("li");
        li.textContent = "‚Ä¢ " + p.features[i];
        ul.appendChild(li);
      }

      features.appendChild(h3);
      features.appendChild(ul);

      const addBtn = document.createElement("button");
      addBtn.className = "add-to-cart-button";
      addBtn.textContent = "L√§gg till varukorg";
      addBtn.addEventListener("click", () => {
        this.addToCart(p.id);
        this.closeProductModal();
      });

      info.appendChild(h1);
      info.appendChild(price);
      info.appendChild(desc);
      info.appendChild(features);
      info.appendChild(addBtn);

      detail.appendChild(imgWrap);
      detail.appendChild(info);

      body.appendChild(detail);
    },

    closeProductModal: function () {
      this.closeModal("product-modal");
    },

    /* =========================================================
       CART MODAL
       ========================================================= */
    openCartModal: function () {
      this.renderCartModalBody();
      this.openModal("cart-modal");
    },

    renderCartModalBody: function () {
      const body = this.byId("cart-modal-body");
      if (!body) return;

      // tom varukorg
      if (this.cart.length === 0) {
        body.innerHTML = "";
        const empty = document.createElement("div");
        empty.className = "empty-cart";

        const p = document.createElement("p");
        p.textContent = "Din varukorg √§r tom";

        const btn = document.createElement("button");
        btn.className = "add-to-cart-button";
        btn.textContent = "Forts√§tt handla";
        btn.addEventListener("click", () => this.closeCartModal());

        empty.appendChild(p);
        empty.appendChild(btn);
        body.appendChild(empty);
        return;
      }

      // totals
      let subtotal = 0;
      for (let i = 0; i < this.cart.length; i++) {
        subtotal += this.cart[i].price * this.cart[i].quantity;
      }
      const shipping = 150;
      const total = subtotal + shipping;

      body.innerHTML = "";

      const layout = document.createElement("div");
      layout.className = "cart-layout";

      const itemsDiv = document.createElement("div");
      itemsDiv.className = "cart-items";

      for (let i = 0; i < this.cart.length; i++) {
        const item = this.cart[i];

        const row = document.createElement("div");
        row.className = "cart-item";

        const imgWrap = document.createElement("div");
        imgWrap.className = "cart-item-image";
        const img = document.createElement("img");
        img.src = item.image;
        img.alt = item.name;
        imgWrap.appendChild(img);

        const info = document.createElement("div");
        info.className = "cart-item-info";

        const name = document.createElement("div");
        name.className = "cart-item-name";
        name.textContent = item.name;

        const price = document.createElement("div");
        price.className = "cart-item-price";
        price.textContent = item.price + " kr";

        const qtyControls = document.createElement("div");
        qtyControls.className = "quantity-controls";

        const minus = document.createElement("button");
        minus.className = "quantity-button";
        minus.textContent = "‚àí";
        minus.addEventListener("click", () => this.decreaseQty(item.id));

        const qty = document.createElement("div");
        qty.className = "quantity-display";
        qty.textContent = item.quantity;

        const plus = document.createElement("button");
        plus.className = "quantity-button";
        plus.textContent = "+";
        plus.addEventListener("click", () => this.addToCart(item.id));

        qtyControls.appendChild(minus);
        qtyControls.appendChild(qty);
        qtyControls.appendChild(plus);

        info.appendChild(name);
        info.appendChild(price);
        info.appendChild(qtyControls);

        const actions = document.createElement("div");
        actions.className = "cart-item-actions";

        const remove = document.createElement("button");
        remove.className = "remove-button";
        remove.textContent = "üóë";
        remove.title = "Ta bort";
        remove.addEventListener("click", () => this.removeFromCart(item.id));

        const itemTotal = document.createElement("div");
        itemTotal.className = "cart-item-total";
        itemTotal.textContent = item.price * item.quantity + " kr";

        actions.appendChild(remove);
        actions.appendChild(itemTotal);

        row.appendChild(imgWrap);
        row.appendChild(info);
        row.appendChild(actions);

        itemsDiv.appendChild(row);
      }

      const summary = document.createElement("div");
      summary.className = "order-summary";

      const h2 = document.createElement("h2");
      h2.textContent = "Ordersammanfattning";

      const line = (label, value, cls) => {
        const d = document.createElement("div");
        d.className = "summary-line" + (cls ? " " + cls : "");
        const a = document.createElement("span");
        a.textContent = label;
        const b = document.createElement("span");
        b.textContent = value;
        d.appendChild(a);
        d.appendChild(b);
        return d;
      };

      summary.appendChild(h2);
      summary.appendChild(line("Delsumma", subtotal + " kr"));
      summary.appendChild(line("Frakt", shipping + " kr"));
      summary.appendChild(line("Total", total + " kr", "total"));

      const checkout = document.createElement("button");
      checkout.className = "checkout-button";
      checkout.textContent = "Checka ut";
      checkout.addEventListener("click", () => alert("Checkout-funktionalitet kommer h√§r!"));

      const cont = document.createElement("button");
      cont.className = "continue-shopping-button";
      cont.textContent = "Forts√§tt handla";
      cont.addEventListener("click", () => this.closeCartModal());

      summary.appendChild(checkout);
      summary.appendChild(cont);

      layout.appendChild(itemsDiv);
      layout.appendChild(summary);

      body.appendChild(layout);
    },

    closeCartModal: function () {
      this.closeModal("cart-modal");
    },

    /* =========================================================
       MODAL HELPERS
       ========================================================= */
    openModal: function (id) {
      const modal = this.byId(id);
      if (!modal) return;
      modal.classList.remove("hidden");
      modal.setAttribute("aria-hidden", "false");
    },

    closeModal: function (id) {
      const modal = this.byId(id);
      if (!modal) return;
      modal.classList.add("hidden");
      modal.setAttribute("aria-hidden", "true");
    },

    /* =========================================================
       CART LOGIC
       ========================================================= */
    findProduct: function (id) {
      for (let i = 0; i < products.length; i++) {
        if (products[i].id === id) return products[i];
      }
      return null;
    },

    getCartItem: function (id) {
      for (let i = 0; i < this.cart.length; i++) {
        if (this.cart[i].id === id) return this.cart[i];
      }
      return null;
    },

    addToCart: function (productId) {
      const p = this.findProduct(productId);
      if (!p) return;

      const item = this.getCartItem(productId);
      if (item) item.quantity++;
      else {
        this.cart.push({ id: p.id, name: p.name, price: p.price, image: p.image, quantity: 1 });
      }

      this.updateCartBadge();
      this.renderProducts();

      // Om cart-modal √§r √∂ppen -> rendera om den
      const cm = this.byId("cart-modal");
      if (cm && !cm.classList.contains("hidden")) this.renderCartModalBody();
    },

    decreaseQty: function (productId) {
      const item = this.getCartItem(productId);
      if (!item) return;

      item.quantity--;
      if (item.quantity <= 0) {
        this.removeFromCart(productId);
        return;
      }

      this.updateCartBadge();
      this.renderProducts();

      const cm = this.byId("cart-modal");
      if (cm && !cm.classList.contains("hidden")) this.renderCartModalBody();
    },

    removeFromCart: function (productId) {
      const newCart = [];
      for (let i = 0; i < this.cart.length; i++) {
        if (this.cart[i].id !== productId) newCart.push(this.cart[i]);
      }
      this.cart = newCart;

      this.updateCartBadge();
      this.renderProducts();

      const cm = this.byId("cart-modal");
      if (cm && !cm.classList.contains("hidden")) this.renderCartModalBody();
    },

    updateCartBadge: function () {
      let count = 0;
      for (let i = 0; i < this.cart.length; i++) {
        count += this.cart[i].quantity;
      }
      this.byId("cart-badge") && (this.byId("cart-badge").textContent = count);
      this.byId("cart-badge-mobile") && (this.byId("cart-badge-mobile").textContent = count);
    },
  };

  app.init();
})();
        </script>
    </body>
</html>
